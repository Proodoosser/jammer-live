<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jammer 1-on-1 Live</title>
<style>
  body { background:#0f0f0f; color:#fff; font-family: Arial, sans-serif; margin:0; padding:0; }
  header { padding:12px; background:#111; text-align:center; font-weight:600; }
  .wrap { display:flex; gap:12px; padding:12px; }
  .col { flex:1; min-width:300px; }
  video { width:100%; height:auto; background:#000; border-radius:8px; border:2px solid #222; }
  #controls { display:flex; gap:8px; margin-top:8px; }
  input, button, select { padding:8px; border-radius:6px; border:1px solid #333; background:#121212; color:#fff; }
  #chat { height:200px; overflow:auto; background:#121212; padding:8px; border-radius:6px; margin-top:8px; }
  .msg { margin-bottom:6px; }
  .small { font-size:12px; color:#aaa; }
</style>
</head>
<body>
<header>Jammer — 1 on 1 Live (WebRTC)</header>

<div style="padding:12px;">
  <div style="display:flex; gap:12px; margin-bottom:12px;">
    <input id="roomId" placeholder="Room ID, напр. lesson123" value="lesson123" />
    <select id="roleSelect">
      <option value="teacher">Teacher</option>
      <option value="student">Student</option>
    </select>
    <button id="joinBtn">Start / Join</button>
    <button id="leaveBtn" disabled>Leave</button>
    <span class="small" id="status">not connected</span>
  </div>

  <div class="wrap">
    <div class="col">
      <div>
        <div style="display:flex; gap:8px;">
          <div style="flex:1"><b>Local (you)</b></div>
          <div style="flex:1; text-align:right"><b>Remote (peer)</b></div>
        </div>
        <div style="display:flex; gap:8px; margin-top:8px;">
          <video id="localVideo" autoplay muted playsinline></video>
          <video id="remoteVideo" autoplay playsinline></video>
        </div>
      </div>

      <div id="controls">
        <button id="muteBtn">Mute</button>
        <button id="camBtn">Camera Off</button>
        <button id="screenBtn">Share Screen</button>
      </div>

      <div id="chat-area" style="margin-top:12px;">
        <div class="small">Chat (messages are local for now)</div>
        <div id="chat" ></div>
        <div style="display:flex; gap:8px; margin-top:8px;">
          <input id="chatInput" placeholder="Message..." />
          <button id="sendChatBtn">Send</button>
        </div>
      </div>
    </div>

    <div class="col" style="max-width:360px;">
      <div style="background:#0b0b0b; padding:12px; border-radius:8px;">
        <h3>Info / Instructions</h3>
        <ul>
          <li>1) Введи одинаковый Room ID для вас и ученика.</li>
          <li>2) Teacher нажимает Start, Student нажимает Join.</li>
          <li>3) Используются STUN/TURN от Xirsys.</li>
        </ul>
        <div style="margin-top:8px;">
          <b>Room:</b> <span id="showRoom">—</span><br/>
          <b>Your socket:</b> <span id="socketId">—</span>
        </div>
      </div>

      <div style="margin-top:12px; background:#0b0b0b; padding:12px; border-radius:8px;">
        <h4>Debug</h4>
        <div class="small">Messages from server:</div>
        <div id="log" style="height:160px; overflow:auto; margin-top:8px;"></div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
<script src="app.js"></script>
</body>
</html>
